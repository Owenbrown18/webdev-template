---
import type { ServicesContent } from '../../../types/content';
import { services, home, getServicesVariant } from '../../../config/content';
import ServicesGrid from './ServicesGrid.astro';
import ServicesList from './ServicesList.astro';

const variants: Record<string, any> = {
  grid: ServicesGrid,
  list: ServicesList,
};

const variantKey = getServicesVariant();
const Component = variantKey === 'none' ? null : variants[variantKey] ?? variants.grid;
const settings = home.services ?? {};
const title = settings.title ?? 'Our Services';
const intro = settings.intro ?? 'Support tailored to your needs.';
const eyebrow = settings.eyebrow ?? 'What we do';
const props = Astro.props;
---
{Component ? (
  <Component
    services={services as ServicesContent}
    title={title}
    intro={intro}
    eyebrow={eyebrow}
    {...props}
  />
) : null}
