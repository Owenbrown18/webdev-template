---
interface Milestone {
  year?: string;
  title?: string;
  description?: string;
  image?: string;
}

interface Props {
  title: string;
  intro?: string;
  eyebrow?: string;
  milestones: Milestone[];
}

const {
  title,
  intro,
  eyebrow,
  milestones,
}: Props = Astro.props as Props;
---
<section class="section-shell">
  <div class="section-container space-y-12">
    <div class="section-intro max-w-3xl text-center">
      {eyebrow && <p class="section-eyebrow">{eyebrow}</p>}
      <h2 class="section-heading">{title}</h2>
      {intro && <p class="section-subtitle leading-7">{intro}</p>}
    </div>
    <div class="relative">
      <div class="pointer-events-none absolute left-3 top-6 hidden h-[calc(100%-3rem)] w-px bg-slate-200 lg:block" aria-hidden="true"></div>
      <div class="space-y-10">
        {milestones.map(({ year, title, description, image }, index) => (
          <div class="grid gap-6 lg:grid-cols-[minmax(0,320px)_minmax(0,1fr)] lg:items-start">
            <div class="relative pl-8 text-sm text-slate-600">
              <span class="absolute -left-[2.05rem] top-1 flex h-5 w-5 items-center justify-center rounded-full border-2 border-brand-primary bg-white shadow-[0_0_0_6px_rgba(var(--color-primary-rgb),0.08)]">
                <span class="h-2 w-2 rounded-full bg-brand-primary"></span>
              </span>
              <p class="text-xs font-semibold uppercase tracking-[0.18em] text-slate-500">{year ?? `Step ${index + 1}`}</p>
              <p class="mt-2 text-base font-semibold text-slate-900">{title}</p>
            </div>
            <article class="surface-card p-6 transition-shadow duration-200 hover:shadow-card-hover">
              <div class="flex items-center gap-4 text-sm font-medium text-brand-primary">
                <span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-brand-primary/10 text-[0.75rem] font-semibold">
                  {year ?? index + 1}
                </span>
                <h3 class="text-lg font-semibold text-slate-900">{title}</h3>
              </div>
              <p class="mt-4 text-sm leading-6 text-slate-600">{description}</p>
              {image && (
                <div class="mt-6 overflow-hidden rounded-2xl border border-slate-200/80 bg-slate-100">
                  <img
                    src={image}
                    alt=""
                    class="h-40 w-full object-cover"
                    loading="lazy"
                    decoding="async"
                  />
                </div>
              )}
            </article>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>
