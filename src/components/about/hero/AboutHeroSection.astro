---
import { site, getAboutHeroVariant, getAboutHeroBackgroundTone } from '../../../config/content';
import { normalizeBackgroundTone, sectionBackgroundClass } from '../../../utils/background';
import AboutHeroClassic from './AboutHeroClassic.astro';
import AboutHeroShowcase from './AboutHeroShowcase.astro';

const variants: Record<string, any> = {
  classic: AboutHeroClassic,
  showcase: AboutHeroShowcase,
};

const variantKey = getAboutHeroVariant();
const Component = variantKey === 'none' ? null : variants[variantKey] ?? variants.classic;
const rawProps = (Astro.props ?? {}) as Record<string, any>;
const overrideTone = rawProps.backgroundTone;
const overrideClass = rawProps.backgroundClass;
const restProps = { ...rawProps };
delete restProps.backgroundTone;
delete restProps.backgroundClass;
const fallbackTone = getAboutHeroBackgroundTone();
const backgroundTone = normalizeBackgroundTone(overrideTone ?? fallbackTone);
const backgroundClass = overrideClass ?? sectionBackgroundClass(backgroundTone);
---
{Component ? (
  <Component
    site={site}
    backgroundClass={backgroundClass}
    {...restProps}
  />
) : null}
