---
import type { SiteContent, TestimonialsContent } from '../types/content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import ServicesGrid from '../components/ServicesGrid.astro';
import BookingEmbed from '../components/BookingEmbed.astro';
import siteSource from '../../content/site.yaml';
import testimonialsSource from '../../content/testimonials.yaml';

const site = siteSource as SiteContent;
const testimonials = testimonialsSource as TestimonialsContent;
const quotes = Array.isArray(testimonials.items) ? testimonials.items : [];
---
<BaseLayout description={site.tagline}>
  <div class="space-y-16 sm:space-y-20">
    <Hero />
    <ServicesGrid />
    {quotes.length > 0 && (
      <section class="py-16 sm:py-20">
        <div class="mx-auto max-w-5xl px-6">
          <div class="mx-auto max-w-2xl text-center">
            <h2 class="text-3xl font-semibold tracking-tight text-slate-900 sm:text-4xl">
              Kind Words
            </h2>
            <p class="mt-4 text-base text-slate-600">
              Real feedback from neighbors who trusted {site.name}.
            </p>
          </div>
          <div class="mt-12 grid gap-6 sm:grid-cols-2">
            {quotes.map(({ quote, author }) => (
              <figure class="h-full rounded-2xl border border-slate-200 bg-white p-6 text-left shadow-sm">
                <blockquote class="text-base font-medium leading-relaxed text-slate-700">
                  “{quote}”
                </blockquote>
                <figcaption class="mt-4 text-sm font-semibold text-slate-900">{author}</figcaption>
              </figure>
            ))}
          </div>
        </div>
      </section>
    )}
    <BookingEmbed />
  </div>
</BaseLayout>
